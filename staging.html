<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Discord Game Status - Staging</title>
    <link rel="stylesheet" href="css/style.css">
    <link href="https://fonts.googleapis.com/css2?family=Roboto&family=Titillium+Web:wght@700&display=swap" rel="stylesheet">
  </head>
  <body onload="loadStatus()">
    <header class="headbg">
      <h1 id="pickedGame" class="introduction">Please pick a game to begin!</h1>
      <img id="currentGame" src="images/placeholder.png">
      <p id="gameTitle"></p>
    </header>
    <main>
      <div class="row">
        <h2 class="introduction"><i class="fas fa-gamepad" aria-hidden="true"></i> Game List</h2>
        <input type="text" id="searchGames" onkeyup="searchFilter()" placeholder="Search for games...">
      </div>
      <div class="row">
        <div class="col-xs game">
          <img src="images/dota-preview.jpg" class="preview">
          <div class="description">
            <h3>Dota 2</h3>
              <p>Flavour cup siphon as breve strong saucer ristretto coffee. Viennese siphon instant dripper cup robusta a barista breve organic macchiato rich. Roast plunger pot, variety strong mocha caffeine breve galão rich. Viennese pumpkin spice, fair trade barista, mug milk mocha caffeine wings caffeine grinder.</p>
              <button class="pink" onclick="sendMessage('Dota 2', 'https://tsprocreative.com/images/dota-cover.jpg')">Play This Game</button>
            </div>
        </div>
        <div class="col-xs game">
          <img src="images/insurgency-preview.jpg" class="preview" />
          <div class="description">
            <h3>Insurgency</h3>
            <p>Flavour cup siphon as breve strong saucer ristretto coffee. Viennese siphon instant dripper cup robusta a barista breve organic macchiato rich. Roast plunger pot, variety strong mocha caffeine breve galão rich. Viennese pumpkin spice, fair trade barista, mug milk mocha caffeine wings caffeine grinder.</p>
            <button class="grey" onclick="sendMessage('Insurgency', 'https://tsprocreative.com/images/insurgency-cover.jpg')">Play This Game</button>
          </div>
        </div>
        <div class="col-xs game">
          <img src="images/mk8d-preview.jpg" class="preview" />
          <div class="description">
            <h3>Mario Kart 8 Deluxe</h3>
              <p>Flavour cup siphon as breve strong saucer ristretto coffee. Viennese siphon instant dripper cup robusta a barista breve organic macchiato rich. Roast plunger pot, variety strong mocha caffeine breve galão rich. Viennese pumpkin spice, fair trade barista, mug milk mocha caffeine wings caffeine grinder.</p>
              <button class="grey" onclick="sendMessage('Mario Kart 8 Deluxe', 'https://tsprocreative.com/images/mk8d-cover.jpg')">Play This Game</button>
            </div>
        </div>
        <div class="col-xs game">
          <img src="images/overcooked-2-preview.jpg" class="preview">
          <div class="description">
            <h3>Overcooked 2</h3>
              <p>Flavour cup siphon as breve strong saucer ristretto coffee. Viennese siphon instant dripper cup robusta a barista breve organic macchiato rich. Roast plunger pot, variety strong mocha caffeine breve galão rich. Viennese pumpkin spice, fair trade barista, mug milk mocha caffeine wings caffeine grinder.</p>
              <button class="blue" onclick="sendMessage('Overcooked 2', 'https://tsprocreative.com/images/overcooked-2-cover.jpg')">Play This Game</button>
            </div>
        </div>
        <div class="col-xs game">
          <img src="images/rocket-league-preview.jpg" class="preview">
          <div class="description">
            <h3>Rocket League</h3>
              <p>Flavour cup siphon as breve strong saucer ristretto coffee. Viennese siphon instant dripper cup robusta a barista breve organic macchiato rich. Roast plunger pot, variety strong mocha caffeine breve galão rich. Viennese pumpkin spice, fair trade barista, mug milk mocha caffeine wings caffeine grinder.</p>
              <button class="blue" onclick="sendMessage('Rocket League', 'https://tsprocreative.com/images/rocket-league-cover.png')">Play This Game</button>
            </div>
        </div>
        <div class="col-xs game">
          <img src="images/splatoon-2-preview.jpg" class="preview">
          <div class="description">
            <h3>Splatoon 2</h3>
              <p>Flavour cup siphon as breve strong saucer ristretto coffee. Viennese siphon instant dripper cup robusta a barista breve organic macchiato rich. Roast plunger pot, variety strong mocha caffeine breve galão rich. Viennese pumpkin spice, fair trade barista, mug milk mocha caffeine wings caffeine grinder.</p>
              <button class="pink" onclick="sendMessage('Splatoon 2', 'https://tsprocreative.com/images/splatoon-2-cover.jpg')">Play This Game</button>
            </div>
        </div>
        <div class="col-xs game">
          <img src="images/streets-of-rogue-preview.jpg" class="preview">
          <div class="description">
            <h3>Streets of Rogue</h3>
              <p>Flavour cup siphon as breve strong saucer ristretto coffee. Viennese siphon instant dripper cup robusta a barista breve organic macchiato rich. Roast plunger pot, variety strong mocha caffeine breve galão rich. Viennese pumpkin spice, fair trade barista, mug milk mocha caffeine wings caffeine grinder.</p>
              <button class="pink" onclick="sendMessage('Streets of Rogue', 'https://tsprocreative.com/images/streets-of-rogue-cover.jpg')">Play This Game</button>
            </div>
        </div>
        <div class="col-xs game">
          <img src="images/ultimate-chicken-horse-preview.jpg" class="preview">
          <div class="description">
            <h3>Ultimate Chicken Horse</h3>
              <p>Flavour cup siphon as breve strong saucer ristretto coffee. Viennese siphon instant dripper cup robusta a barista breve organic macchiato rich. Roast plunger pot, variety strong mocha caffeine breve galão rich. Viennese pumpkin spice, fair trade barista, mug milk mocha caffeine wings caffeine grinder.</p>
              <button class="pink" onclick="sendMessage('Ultimate Chicken Horse', 'https://tsprocreative.com/images/ultimate-chicken-horse-cover.jpg')">Play This Game</button>
            </div>
        </div>
      </div>
    </main>
  </body>
  <script src="https://kit.fontawesome.com/036ea80dc6.js" crossorigin="anonymous"></script>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
  <script src='https://cdnjs.cloudflare.com/ajax/libs/tabletop.js/1.5.1/tabletop.min.js'></script>
<script type='text/javascript'>    
  var publicSpreadsheetUrl = 'https://docs.google.com/spreadsheets/d/e/2PACX-1vQb6yYbtPo8TgL-NwlqSv6w9wBfIFQytdwGWeXSvNTXKewKVIzlix2Slg081kHVduPFE-sD8Y5eIqqf/pubhtml';

  function init() {
    Tabletop.init( { key: publicSpreadsheetUrl,
                     callback: showInfo,
                     simpleSheet: true } )
  }

  function showInfo(data, tabletop) {
    alert('Successfully processed!')
    console.log(data);
  }

  window.addEventListener('DOMContentLoaded', init)
</script>
  <script>
  	function loadStatus() {
  // 		var client = new XMLHttpRequest();
		// client.open('GET', 'status.txt');
		// client.onreadystatechange = function() {
		//   alert(client.responseText);
		// }
		// client.send();
  	}
	  
    function sendMessage(x,img) {
      var request = new XMLHttpRequest();
      request.open("POST", "https://discord.com/api/webhooks/761769489011572757/j15L3vep7P6xhWs6DYxLslDHtLg86sJg6Vqb3MZY1KDxFdBU3H1mncn994zdAzZj4XZE");

      request.setRequestHeader('Content-type', 'application/json');

      var params = {
        "username": "La Crew",
        "embeds": [{
          "title": "Game Status",
          "color": "52479",
          "image": { 
            "url": img 
          },
          "description": "We're currently playing " + x + "!"
        }]
      }

      request.send(JSON.stringify(params));
      alert(x);
      document.getElementById("currentGame").src=img;
      document.getElementById("pickedGame").innerHTML = "We're currently playing:";
      document.getElementById("gameTitle").innerHTML = x;
    }
    function searchFilter() {
      // Declare variables
      var input, filter, ul, li, a, i, txtValue;
      input = document.getElementById('searchGames');
      filter = input.value.toUpperCase();
      game = document.getElementsByClassName('game');

      // Loop through all list items, and hide those who don't match the search query
      for (i = 0; i < game.length; i++) {
        a = game[i].getElementsByTagName("h3")[0];
        txtValue = a.textContent || a.innerText;
        if (txtValue.toUpperCase().indexOf(filter) > -1) {
          game[i].style.display = "";
        } else {
          game[i].style.display = "none";
        }
      }
    }
  </script>
</html>